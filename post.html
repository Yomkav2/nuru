<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Nuru â€” View Post</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
<style>
    :root{
        --bg:#010105;
        --panel:#0a0915;
        --muted:#8b8998;
        --accent:#a78bfa;
        --accent-2:#2dd4bf;
        --accent-3:#f472b6;
        --neon-glow: 0 0 15px rgba(167, 139, 250, 0.5);
        --neon-glow-teal: 0 0 15px rgba(45, 212, 191, 0.5);
        --neon-glow-pink: 0 0 15px rgba(244, 114, 182, 0.4);
        --gradient: linear-gradient(135deg, #a78bfa 0%, #2dd4bf 50%, #f472b6 100%);
    }
    
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    html, body {
        height: 100%;
        background: var(--bg);
        color: #f0f2ff;
        font-family: 'Inter', system-ui, -apple-system, sans-serif;
        -webkit-font-smoothing: antialiased;
        line-height: 1.6;
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
        width: 8px;
    }
    ::-webkit-scrollbar-track {
        background: var(--bg);
    }
    ::-webkit-scrollbar-thumb {
        background: var(--accent);
        border-radius: 4px;
    }

    .wrap {
        max-width: 1000px;
        margin: 0 auto;
        padding: 24px;
        animation: fadeIn 0.8s ease-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .top {
        display: flex;
        align-items: center;
        gap: 16px;
        margin-bottom: 24px;
    }

    a.back {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--muted);
        text-decoration: none;
        font-size: 0.95rem;
        font-weight: 500;
        padding: 10px 16px;
        border-radius: 12px;
        background: rgba(167, 139, 250, 0.05);
        border: 1px solid rgba(167, 139, 250, 0.1);
        transition: all 0.3s ease;
    }

    a.back:hover {
        color: #fff;
        background: rgba(167, 139, 250, 0.1);
        border-color: rgba(167, 139, 250, 0.3);
        transform: translateX(-5px);
    }

    h1 {
        margin: 0;
        color: var(--accent);
        font-size: 1.8rem;
        font-weight: 700;
        flex: 1;
    }

    .subtitle {
        color: var(--muted);
        margin-top: 4px;
        font-size: 1.05rem;
        line-height: 1.5;
    }

    .panel {
        background: var(--panel);
        border-radius: 20px;
        padding: 28px;
        border: 1px solid rgba(167, 139, 250, 0.15);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
    }

    .panel::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--gradient);
    }

    .meta {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 20px;
        margin-bottom: 24px;
        flex-wrap: wrap;
    }

    .meta .small {
        color: var(--muted);
        font-size: 0.9rem;
    }

    .tags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 12px;
    }

    .tag {
        display: inline-block;
        padding: 6px 12px;
        border-radius: 8px;
        background: rgba(167, 139, 250, 0.1);
        color: var(--accent);
        font-size: 0.8rem;
        font-weight: 600;
        border: 1px solid rgba(167, 139, 250, 0.2);
    }

    .controls {
        display: flex;
        gap: 14px;
        flex-wrap: wrap;
    }

    /* Telegram buttons */
    .telegram-section {
        margin: 24px 0;
        padding: 20px;
        border-radius: 16px;
        background: rgba(167, 139, 250, 0.05);
        border: 1px solid rgba(167, 139, 250, 0.1);
        text-align: center;
    }

    .telegram-buttons {
        display: flex;
        gap: 12px;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 16px;
    }

    .tg-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px 20px;
        border-radius: 12px;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        border: 1px solid transparent;
    }

    .tg-btn.nuru {
        background: linear-gradient(135deg, #0088cc, #00aced);
        box-shadow: 0 0 15px rgba(0, 136, 204, 0.5);
        color: white;
    }

    .tg-btn.yomka {
        background: linear-gradient(135deg, #ff6b8b, #ff8e53);
        box-shadow: 0 0 15px rgba(255, 107, 139, 0.5);
        color: white;
    }

    .tg-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 0 20px rgba(0, 136, 204, 0.7);
    }

    .tg-btn.yomka:hover {
        box-shadow: 0 0 20px rgba(255, 107, 139, 0.7);
    }

    /* Enhanced buttons */
    .btn {
        border: 0;
        padding: 14px 22px;
        border-radius: 12px;
        color: white;
        font-weight: 600;
        cursor: pointer;
        letter-spacing: 0.5px;
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
        min-width: 140px;
        justify-content: center;
    }

    .btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.6s;
    }

    .btn:hover::before {
        left: 100%;
    }

    .btn.copy {
        background: linear-gradient(135deg, var(--accent), #8b5cf6);
        box-shadow: var(--neon-glow);
    }

    .btn.copy:hover {
        box-shadow: 0 0 20px rgba(167, 139, 250, 0.7);
        transform: translateY(-3px);
    }

    .btn.alt {
        background: linear-gradient(135deg, var(--accent-2), #25a089);
        box-shadow: var(--neon-glow-teal);
    }

    .btn.alt:hover {
        box-shadow: 0 0 20px rgba(45, 212, 191, 0.7);
        transform: translateY(-3px);
    }

    /* Enhanced code block */
    pre {
        background: #0c0b16;
        color: #e7eef7;
        padding: 24px;
        border-radius: 16px;
        overflow: auto;
        border: 1px solid rgba(167, 139, 250, 0.15);
        box-shadow: inset 0 0 20px rgba(0,0,0,0.4);
        font-family: 'Fira Code', 'Courier New', monospace;
        line-height: 1.5;
        white-space: pre-wrap;
        word-break: break-word;
        margin-top: 20px;
        position: relative;
        max-height: 600px;
    }

    code {
        font-family: inherit;
        color: inherit;
        font-size: 0.9rem;
    }

    .note {
        margin-top: 16px;
        color: var(--muted);
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    #error {
        color: #ff6b8b;
        background: rgba(255, 107, 139, 0.1);
        padding: 12px 16px;
        border-radius: 10px;
        border: 1px solid rgba(255, 107, 139, 0.2);
    }

    .success-message {
        position: fixed;
        bottom: 24px;
        right: 24px;
        background: var(--accent-2);
        color: #0a0915;
        padding: 12px 20px;
        border-radius: 12px;
        font-weight: 600;
        box-shadow: var(--neon-glow-teal);
        z-index: 1000;
        animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }

    @media (max-width: 768px) {
        .meta {
            flex-direction: column;
        }
        
        .controls {
            width: 100%;
        }
        
        .btn {
            flex: 1;
            min-width: auto;
        }
        
        h1 {
            font-size: 1.5rem;
        }
        
        .wrap {
            padding: 16px;
        }
        
        .telegram-buttons {
            flex-direction: column;
        }
        
        .tg-btn {
            justify-content: center;
        }
    }

    @media (max-width: 480px) {
        .controls {
            flex-direction: column;
        }
        
        .btn {
            width: 100%;
        }
        
        pre {
            padding: 16px;
        }
    }
</style>
</head>
<body>
<div class="wrap">
    <div class="top">
        <a class="back" href="index.html">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Back to Scripts
        </a>
        <h1 id="title">Loading...</h1>
    </div>

    <div id="panel" class="panel">
        <div class="meta">
            <div style="flex: 1;">
                <div id="desc" class="subtitle">Loading description...</div>
                <div id="tags" class="tags"></div>
            </div>
            <div class="controls">
                <button id="copy-btn" class="btn copy">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <rect x="9" y="9" width="13" height="13" rx="2" stroke="currentColor" stroke-width="2"/>
                        <path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    Copy
                </button>
                <button id="download-btn" class="btn alt">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M21 15V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 3V16M12 16L16 12M12 16L8 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Download
                </button>
            </div>
        </div>

        <div class="telegram-section">
            <div style="color: var(--muted); margin-bottom: 8px;">Join our Telegram channels for more scripts!</div>
            <div class="telegram-buttons">
                <a href="https://t.me/nuruhub" class="tg-btn nuru" target="_blank">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    NURU TELEGRAM
                </a>
                <a href="https://t.me/YomkaMadeIt" class="tg-btn yomka" target="_blank">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    YOMKA TELEGRAM
                </a>
            </div>
        </div>

        <pre id="script"><code id="script-code" class="language-lua"></code></pre>
        <div id="error" class="note" style="display:none;"></div>
    </div>
</div>

<script src="posts.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/components/prism-lua.min.js"></script>
<script>
function qs(name){
    return new URLSearchParams(location.search).get(name);
}

function showSuccess(message) {
    const el = document.createElement('div');
    el.className = 'success-message';
    el.textContent = message;
    document.body.appendChild(el);
    setTimeout(() => {
        el.style.opacity = '0';
        el.style.transform = 'translateX(100%)';
        setTimeout(() => el.remove(), 300);
    }, 2000);
}

if (typeof posts === 'undefined') {
    document.getElementById('panel').innerHTML = '<div id="error">Error: posts.js not loaded.</div>';
    document.getElementById('error').style.display = 'block';
    throw new Error('posts.js not found');
}

const id = parseInt(qs('id'),10);
if (!id || isNaN(id)) {
    document.getElementById('error').style.display='block';
    document.getElementById('error').textContent = 'Invalid script ID in URL.';
    document.getElementById('title').textContent = 'Error';
    document.getElementById('desc').textContent = '';
    throw new Error('invalid id');
}

const index = id - 1;
if (index < 0 || index >= posts.length) {
    document.getElementById('error').style.display='block';
    document.getElementById('error').textContent = 'Script with this ID not found.';
    document.getElementById('title').textContent = 'Not Found';
    document.getElementById('desc').textContent = '';
    throw new Error('post not found');
}

const post = posts[index];

document.getElementById('title').textContent = post.title || 'Untitled Script';
document.getElementById('desc').textContent = post.description || 'No description available.';
const tagsEl = document.getElementById('tags');
if (post.tags && post.tags.length) {
    tagsEl.innerHTML = post.tags.map(tag => `<span class="tag">${tag}</span>`).join('');
} else {
    tagsEl.innerHTML = '<span class="tag">script</span>';
}

const codeEl = document.getElementById('script-code');
const rawScript = String(post.scriptContent || '').trim();
codeEl.textContent = rawScript;

// Apply Prism syntax highlighting
if (window.Prism) {
    Prism.highlightElement(codeEl);
}

// Copy functionality
const copyBtn = document.getElementById('copy-btn');
copyBtn.addEventListener('click', async () => {
    try {
        await navigator.clipboard.writeText(rawScript);
        showSuccess('Script copied to clipboard!');
        copyBtn.innerHTML = `
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M20 6L9 17L4 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Copied!
        `;
        setTimeout(() => {
            copyBtn.innerHTML = `
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                    <rect x="9" y="9" width="13" height="13" rx="2" stroke="currentColor" stroke-width="2"/>
                    <path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5" stroke="currentColor" stroke-width="2"/>
                </svg>
                Copy
            `;
        }, 2000);
    } catch(e) {
        copyBtn.textContent = 'Error';
        console.error(e);
        setTimeout(() => copyBtn.textContent = 'Copy', 1400);
    }
});

// Download functionality
document.getElementById('download-btn').addEventListener('click', () => {
    const blob = new Blob([rawScript], {type:'text/plain;charset=utf-8'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    const safe = (post.title || 'script').replace(/[\/\\?%*:|"<>]/g,'_').slice(0,60);
    a.download = safe + '.lua';
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
    showSuccess('Script downloaded!');
});
</script>
</body>
</html>
